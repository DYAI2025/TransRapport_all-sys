var el=Object.defineProperty;var tl=(e,t,l)=>t in e?el(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var tt=(e,t,l)=>tl(e,typeof t!="symbol"?t+"":t,l);import{Command as ll}from"@tauri-apps/api/shell";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const p of o)if(p.type==="childList")for(const i of p.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function l(o){const p={};return o.integrity&&(p.integrity=o.integrity),o.referrerPolicy&&(p.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?p.credentials="include":o.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function s(o){if(o.ep)return;o.ep=!0;const p=l(o);fetch(o.href,p)}})();function ce(){}function Kt(e){return e()}function Et(){return Object.create(null)}function Se(e){e.forEach(Kt)}function Wt(e){return typeof e=="function"}function Yt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function sl(e){return Object.keys(e).length===0}function n(e,t){e.appendChild(t)}function H(e,t,l){e.insertBefore(t,l||null)}function U(e){e.parentNode&&e.parentNode.removeChild(e)}function Re(e,t){for(let l=0;l<e.length;l+=1)e[l]&&e[l].d(t)}function r(e){return document.createElement(e)}function k(e){return document.createTextNode(e)}function y(){return k(" ")}function J(e,t,l,s){return e.addEventListener(t,l,s),()=>e.removeEventListener(t,l,s)}function c(e,t,l){l==null?e.removeAttribute(t):e.getAttribute(t)!==l&&e.setAttribute(t,l)}function nl(e){return Array.from(e.childNodes)}function N(e,t){t=""+t,e.data!==t&&(e.data=t)}function We(e,t){e.value=t??""}function Rt(e,t,l,s){l==null?e.style.removeProperty(t):e.style.setProperty(t,l,"")}function It(e,t,l){for(let s=0;s<e.options.length;s+=1){const o=e.options[s];if(o.__value===t){o.selected=!0;return}}(!l||t!==void 0)&&(e.selectedIndex=-1)}function ol(e){const t=e.querySelector(":checked");return t&&t.__value}let Ae;function Ie(e){Ae=e}function il(){if(!Ae)throw new Error("Function called outside component initialization");return Ae}function Gt(e){il().$$.on_mount.push(e)}const ye=[],At=[];let ke=[];const Ct=[],rl=Promise.resolve();let st=!1;function al(){st||(st=!0,rl.then(Qt))}function Ye(e){ke.push(e)}const lt=new Set;let we=0;function Qt(){if(we!==0)return;const e=Ae;do{try{for(;we<ye.length;){const t=ye[we];we++,Ie(t),cl(t.$$)}}catch(t){throw ye.length=0,we=0,t}for(Ie(null),ye.length=0,we=0;At.length;)At.pop()();for(let t=0;t<ke.length;t+=1){const l=ke[t];lt.has(l)||(lt.add(l),l())}ke.length=0}while(ye.length);for(;Ct.length;)Ct.pop()();st=!1,lt.clear(),Ie(e)}function cl(e){if(e.fragment!==null){e.update(),Se(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ye)}}function ul(e){const t=[],l=[];ke.forEach(s=>e.indexOf(s)===-1?t.push(s):l.push(s)),l.forEach(s=>s()),ke=t}const Ke=new Set;let ae;function fl(){ae={r:0,c:[],p:ae}}function dl(){ae.r||Se(ae.c),ae=ae.p}function Ge(e,t){e&&e.i&&(Ke.delete(e),e.i(t))}function nt(e,t,l,s){if(e&&e.o){if(Ke.has(e))return;Ke.add(e),ae.c.push(()=>{Ke.delete(e),s&&(l&&e.d(1),s())}),e.o(t)}else s&&s()}function X(e){return e?.length!==void 0?e:Array.from(e)}function pl(e){e&&e.c()}function Xt(e,t,l){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,l),Ye(()=>{const p=e.$$.on_mount.map(Kt).filter(Wt);e.$$.on_destroy?e.$$.on_destroy.push(...p):Se(p),e.$$.on_mount=[]}),o.forEach(Ye)}function Zt(e,t){const l=e.$$;l.fragment!==null&&(ul(l.after_update),Se(l.on_destroy),l.fragment&&l.fragment.d(t),l.on_destroy=l.fragment=null,l.ctx=[])}function gl(e,t){e.$$.dirty[0]===-1&&(ye.push(e),al(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $t(e,t,l,s,o,p,i=null,u=[-1]){const a=Ae;Ie(e);const d=e.$$={fragment:null,ctx:[],props:p,update:ce,not_equal:o,bound:Et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Et(),dirty:u,skip_bound:!1,root:t.target||a.$$.root};i&&i(d.root);let v=!1;if(d.ctx=l?l(e,t.props||{},(_,D,...b)=>{const E=b.length?b[0]:D;return d.ctx&&o(d.ctx[_],d.ctx[_]=E)&&(!d.skip_bound&&d.bound[_]&&d.bound[_](E),v&&gl(e,_)),D}):[],d.update(),v=!0,Se(d.before_update),d.fragment=s?s(d.ctx):!1,t.target){if(t.hydrate){const _=nl(t.target);d.fragment&&d.fragment.l(_),_.forEach(U)}else d.fragment&&d.fragment.c();t.intro&&Ge(e.$$.fragment),Xt(e,t.target,t.anchor),Qt()}Ie(a)}class xt{constructor(){tt(this,"$$");tt(this,"$$set")}$destroy(){Zt(this,1),this.$destroy=ce}$on(t,l){if(!Wt(l))return ce;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(l),()=>{const o=s.indexOf(l);o!==-1&&s.splice(o,1)}}$set(t){this.$$set&&!sl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const vl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(vl);async function _l(e){const l=await new ll("me",e).execute();if(l.code!==0)throw new Error(`CLI failed: ${l.stderr||l.stdout}`);try{return JSON.parse(l.stdout)}catch{return l.stdout.trim()}}async function B(e){try{const t=await _l(e);return{success:!0,data:t,stdout:typeof t=="string"?t:JSON.stringify(t),stderr:""}}catch(t){return{success:!1,error:`${t}`,stdout:"",stderr:`${t}`}}}const hl=(e,t)=>B(["audio","start","--conv",e,"--device",t||"default","--format","wav"]),ml=(e,t)=>B(["audio","stop","--conv",e,"--out",t||`./sessions/${e}/raw.wav`]),bl=(e,t,l)=>{const s=["job","create","--conv",e,"--text",t];return s.push("--description",l),B(s)},wl=(e,t="base",l="de")=>B(["transcribe","transcribe","--conv",e,"--model",t,"--lang",l,"--output-json"]),yl=(e,t=1.5)=>B(["diarize","diarize","--conv",e,"--min-duration",t.toString(),"--output-json"]),kl=e=>B(["run","scan","--conv",e,"--window-sem","ANY 2 IN 3","--window-clu","AT_LEAST 1 IN 5"]),Sl=(e,t=200)=>B(["view","events","--conv",e,"--level","ato","--last",t.toString(),"--output-json"]),Dl=(e,t=200)=>B(["view","events","--conv",e,"--level","sem","--last",t.toString(),"--output-json"]),El=(e,t=200)=>B(["view","events","--conv",e,"--level","clu","--last",t.toString(),"--output-json"]),Rl=(e,t=200)=>B(["view","events","--conv",e,"--level","mema","--last",t.toString(),"--output-json"]),Il=(e,t="pdf")=>B(["export","report","--conv",e,"--format",t,"--out",`exports/${e}/report.pdf`]),Al=e=>B(["export","events","--conv",e,"--level","all","--out",`exports/${e}/`]),Cl=()=>B(["audio","devices"]);function zt(e,t,l){const s=e.slice();return s[30]=t[l],s}function Lt(e,t,l){const s=e.slice();return s[33]=t[l],s}function Nt(e,t,l){const s=e.slice();return s[36]=t[l],s}function Tt(e,t,l){const s=e.slice();return s[39]=t[l],s}function Ft(e,t,l){const s=e.slice();return s[42]=t[l],s}function Ot(e){let t,l=e[42].name+"",s,o,p=e[42].is_default?"(Default)":"",i,u;return{c(){t=r("option"),s=k(l),o=y(),i=k(p),t.__value=u=e[42].id,We(t,t.__value)},m(a,d){H(a,t,d),n(t,s),n(t,o),n(t,i)},p(a,d){d[0]&64&&l!==(l=a[42].name+"")&&N(s,l),d[0]&64&&p!==(p=a[42].is_default?"(Default)":"")&&N(i,p),d[0]&64&&u!==(u=a[42].id)&&(t.__value=u,We(t,t.__value))},d(a){a&&U(t)}}}function jt(e){let t,l=e[39].toUpperCase()+"",s,o,p=(e[10][e[39]]?.length||0)+"",i,u,a,d,v,_;function D(){return e[25](e[39])}return{c(){t=r("button"),s=k(l),o=k(" ("),i=k(p),u=k(`)
              `),c(t,"class",a="btn btn-view "+(e[11]===e[39]?"active":"")+" svelte-5gtlll"),t.disabled=d=e[1]!=="completed"},m(b,E){H(b,t,E),n(t,s),n(t,o),n(t,i),n(t,u),v||(_=J(t,"click",D),v=!0)},p(b,E){e=b,E[0]&1024&&p!==(p=(e[10][e[39]]?.length||0)+"")&&N(i,p),E[0]&2048&&a!==(a="btn btn-view "+(e[11]===e[39]?"active":"")+" svelte-5gtlll")&&c(t,"class",a),E[0]&2&&d!==(d=e[1]!=="completed")&&(t.disabled=d)},d(b){b&&U(t),v=!1,_()}}}function Mt(e){let t,l,s,o,p,i;return{c(){t=r("div"),l=r("div"),s=k(e[3]),o=y(),p=r("div"),i=r("div"),c(l,"class","progress-label svelte-5gtlll"),c(i,"class","progress-fill svelte-5gtlll"),Rt(i,"width",e[4]+"%"),c(p,"class","progress-bar svelte-5gtlll"),c(t,"class","progress-section svelte-5gtlll")},m(u,a){H(u,t,a),n(t,l),n(l,s),n(t,o),n(t,p),n(p,i)},p(u,a){a[0]&8&&N(s,u[3]),a[0]&16&&Rt(i,"width",u[4]+"%")},d(u){u&&U(t)}}}function Pt(e){let t,l,s,o,p,i,u,a=e[8].language+"",d,v,_,D,b,E=e[8].duration+"",z,S,g,L,V=e[8].text+"",K;return{c(){t=r("div"),l=r("h4"),l.textContent="üìù Transcription",s=y(),o=r("div"),p=r("p"),i=r("strong"),i.textContent="Language:",u=y(),d=k(a),v=y(),_=r("p"),D=r("strong"),D.textContent="Duration:",b=y(),z=k(E),S=k("s"),g=y(),L=r("div"),K=k(V),c(l,"class","svelte-5gtlll"),c(L,"class","transcript svelte-5gtlll"),c(o,"class","result-data"),c(t,"class","result-section svelte-5gtlll")},m(I,R){H(I,t,R),n(t,l),n(t,s),n(t,o),n(o,p),n(p,i),n(p,u),n(p,d),n(o,v),n(o,_),n(_,D),n(_,b),n(_,z),n(_,S),n(o,g),n(o,L),n(L,K)},p(I,R){R[0]&256&&a!==(a=I[8].language+"")&&N(d,a),R[0]&256&&E!==(E=I[8].duration+"")&&N(z,E),R[0]&256&&V!==(V=I[8].text+"")&&N(K,V)},d(I){I&&U(t)}}}function Ut(e){let t,l,s,o,p,i=X(e[9].speakers),u=[];for(let a=0;a<i.length;a+=1)u[a]=Bt(Nt(e,i,a));return{c(){t=r("div"),l=r("h4"),l.textContent="üë• Speaker Diarization",s=y(),o=r("div"),p=r("div");for(let a=0;a<u.length;a+=1)u[a].c();c(l,"class","svelte-5gtlll"),c(p,"class","speakers svelte-5gtlll"),c(o,"class","result-data"),c(t,"class","result-section svelte-5gtlll")},m(a,d){H(a,t,d),n(t,l),n(t,s),n(t,o),n(o,p);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m(p,null)},p(a,d){if(d[0]&512){i=X(a[9].speakers);let v;for(v=0;v<i.length;v+=1){const _=Nt(a,i,v);u[v]?u[v].p(_,d):(u[v]=Bt(_),u[v].c(),u[v].m(p,null))}for(;v<u.length;v+=1)u[v].d(1);u.length=i.length}},d(a){a&&U(t),Re(u,a)}}}function Bt(e){let t,l,s=e[36].id+"",o,p,i,u=e[36].speaking_time.toFixed(1)+"",a,d,v,_,D=e[36].segment_count+"",b,E,z;return{c(){t=r("div"),l=r("span"),o=k(s),p=y(),i=r("span"),a=k(u),d=k("s"),v=y(),_=r("span"),b=k(D),E=k(" segments"),z=y(),c(l,"class","speaker-id svelte-5gtlll"),c(i,"class","speaker-time"),c(_,"class","speaker-segments"),c(t,"class","speaker svelte-5gtlll")},m(S,g){H(S,t,g),n(t,l),n(l,o),n(t,p),n(t,i),n(i,a),n(i,d),n(t,v),n(t,_),n(_,b),n(_,E),n(t,z)},p(S,g){g[0]&512&&s!==(s=S[36].id+"")&&N(o,s),g[0]&512&&u!==(u=S[36].speaking_time.toFixed(1)+"")&&N(a,u),g[0]&512&&D!==(D=S[36].segment_count+"")&&N(b,D)},d(S){S&&U(t)}}}function Vt(e){let t,l,s,o=e[11].toUpperCase()+"",p,i,u,a,d=X(e[10][e[11]].slice(0,10)),v=[];for(let _=0;_<d.length;_+=1)v[_]=qt(Lt(e,d,_));return{c(){t=r("div"),l=r("h4"),s=k("üèõÔ∏è Constitutional Markers - "),p=k(o),i=y(),u=r("div"),a=r("div");for(let _=0;_<v.length;_+=1)v[_].c();c(l,"class","svelte-5gtlll"),c(a,"class","events-list svelte-5gtlll"),c(u,"class","result-data"),c(t,"class","result-section svelte-5gtlll")},m(_,D){H(_,t,D),n(t,l),n(l,s),n(l,p),n(t,i),n(t,u),n(u,a);for(let b=0;b<v.length;b+=1)v[b]&&v[b].m(a,null)},p(_,D){if(D[0]&2048&&o!==(o=_[11].toUpperCase()+"")&&N(p,o),D[0]&3072){d=X(_[10][_[11]].slice(0,10));let b;for(b=0;b<d.length;b+=1){const E=Lt(_,d,b);v[b]?v[b].p(E,D):(v[b]=qt(E),v[b].c(),v[b].m(a,null))}for(;b<v.length;b+=1)v[b].d(1);v.length=d.length}},d(_){_&&U(t),Re(v,_)}}}function qt(e){let t,l,s=e[33].start_time.toFixed(1)+"",o,p,i,u,a=e[33].marker_subtype+"",d,v,_,D=(e[33].confidence*100).toFixed(0)+"",b,E,z,S,g=e[33].evidence.substring(0,50)+"",L,V,K;return{c(){t=r("div"),l=r("span"),o=k(s),p=k("s"),i=y(),u=r("span"),d=k(a),v=y(),_=r("span"),b=k(D),E=k("%"),z=y(),S=r("span"),L=k(g),V=k("..."),K=y(),c(l,"class","event-time svelte-5gtlll"),c(u,"class","event-type svelte-5gtlll"),c(_,"class","event-confidence svelte-5gtlll"),c(S,"class","event-evidence svelte-5gtlll"),c(t,"class","event-item svelte-5gtlll")},m(I,R){H(I,t,R),n(t,l),n(l,o),n(l,p),n(t,i),n(t,u),n(u,d),n(t,v),n(t,_),n(_,b),n(_,E),n(t,z),n(t,S),n(S,L),n(S,V),n(t,K)},p(I,R){R[0]&3072&&s!==(s=I[33].start_time.toFixed(1)+"")&&N(o,s),R[0]&3072&&a!==(a=I[33].marker_subtype+"")&&N(d,a),R[0]&3072&&D!==(D=(I[33].confidence*100).toFixed(0)+"")&&N(b,D),R[0]&3072&&g!==(g=I[33].evidence.substring(0,50)+"")&&N(L,g)},d(I){I&&U(t)}}}function Jt(e){let t,l=e[30]+"",s;return{c(){t=r("div"),s=k(l),c(t,"class","log-entry svelte-5gtlll")},m(o,p){H(o,t,p),n(t,s)},p(o,p){p[0]&32&&l!==(l=o[30]+"")&&N(s,l)},d(o){o&&U(t)}}}function zl(e){let t,l,s,o,p,i,u,a,d,v,_,D,b,E,z,S,g,L,V,K,I,R,$,ue,Ce,q,W,ze,Z,Le,fe,Qe,h,w,C,Q,de,Ne,ot,Te,te,it,Fe,rt,pe,Oe,at,x,le,ct,je,ut,se,ft,Me,dt,ne,pt,Pe,gt,ge,Ue,vt,Be,De,_t,ve,Ve,ht,_e,oe,mt,qe,bt,ie,wt,Je,yt,re,Xe,Y,Ze,$e,kt,he,He,St,Ee,xe,Dt,me=X(e[6]),T=[];for(let f=0;f<me.length;f+=1)T[f]=Ot(Ft(e,me,f));let et=X(["ato","sem","clu","mema"]),G=[];for(let f=0;f<4;f+=1)G[f]=jt(Tt(e,et,f));let O=e[3]&&Mt(e),j=e[8]&&Pt(e),M=e[9]&&Ut(e),P=e[1]==="completed"&&e[10][e[11]]?.length&&Vt(e),be=X(e[5]),F=[];for(let f=0;f<be.length;f+=1)F[f]=Jt(zt(e,be,f));return{c(){t=r("div"),l=r("div"),s=r("div"),o=r("h1"),o.textContent="üèõÔ∏è TransRapport Desktop",p=y(),i=r("div"),u=r("span"),u.textContent="Session:",a=y(),d=r("input"),v=y(),_=r("span"),D=k(e[1]),E=y(),z=r("div"),S=r("div"),g=r("label"),L=r("input"),V=k(`
          LLM Assist (Disabled)`),K=y(),I=r("div"),R=r("div"),$=r("div"),ue=r("h3"),ue.textContent="üé§ Audio Recording",Ce=y(),q=r("div"),W=r("select");for(let f=0;f<T.length;f+=1)T[f].c();ze=y(),Z=r("button"),Le=k("üî¥ Start Recording"),Qe=y(),h=r("button"),w=k("‚èπÔ∏è Stop Recording"),Q=y(),de=r("div"),Ne=r("h3"),Ne.textContent="üìÅ File Import",ot=y(),Te=r("div"),te=r("button"),it=k("üìÇ Import File"),rt=y(),pe=r("div"),Oe=r("h3"),Oe.textContent="üîÑ Processing Pipeline",at=y(),x=r("div"),le=r("button"),ct=k("üéôÔ∏è Transcribe"),ut=y(),se=r("button"),ft=k("üë• Diarize"),dt=y(),ne=r("button"),pt=k("üèõÔ∏è Analyze"),gt=y(),ge=r("div"),Ue=r("h3"),Ue.textContent="üìä View Results",vt=y(),Be=r("div"),De=r("div");for(let f=0;f<4;f+=1)G[f].c();_t=y(),ve=r("div"),Ve=r("h3"),Ve.textContent="üì§ Export",ht=y(),_e=r("div"),oe=r("button"),mt=k("üìã Export Report"),bt=y(),ie=r("button"),wt=k("üíæ Export Data"),yt=y(),re=r("div"),O&&O.c(),Xe=y(),Y=r("div"),j&&j.c(),Ze=y(),M&&M.c(),$e=y(),P&&P.c(),kt=y(),he=r("div"),He=r("h4"),He.textContent="üìã System Logs",St=y(),Ee=r("div");for(let f=0;f<F.length;f+=1)F[f].c();c(o,"class","svelte-5gtlll"),c(u,"class","label"),c(d,"placeholder","Enter session ID or generate new"),c(d,"class","svelte-5gtlll"),c(_,"class",b="status status-"+e[1]+" svelte-5gtlll"),c(i,"class","session-info svelte-5gtlll"),c(s,"class","header-left"),c(L,"type","checkbox"),L.disabled=!0,c(g,"class","svelte-5gtlll"),c(S,"class","llm-toggle svelte-5gtlll"),c(z,"class","header-right"),c(l,"class","header svelte-5gtlll"),c(ue,"class","svelte-5gtlll"),c(W,"class","svelte-5gtlll"),e[7]===void 0&&Ye(()=>e[24].call(W)),Z.disabled=fe=e[2]||e[1]!=="idle",c(Z,"class","btn btn-record svelte-5gtlll"),h.disabled=C=!e[2],c(h,"class","btn btn-stop svelte-5gtlll"),c(q,"class","controls svelte-5gtlll"),c($,"class","section svelte-5gtlll"),c(Ne,"class","svelte-5gtlll"),te.disabled=Fe=e[1]!=="idle",c(te,"class","btn btn-import svelte-5gtlll"),c(Te,"class","controls svelte-5gtlll"),c(de,"class","section svelte-5gtlll"),c(Oe,"class","svelte-5gtlll"),le.disabled=je=e[1]!=="idle"||!e[0],c(le,"class","btn btn-process svelte-5gtlll"),se.disabled=Me=e[1]!=="idle"||!e[0],c(se,"class","btn btn-process svelte-5gtlll"),ne.disabled=Pe=e[1]!=="idle"||!e[0],c(ne,"class","btn btn-process svelte-5gtlll"),c(x,"class","controls pipeline svelte-5gtlll"),c(pe,"class","section svelte-5gtlll"),c(Ue,"class","svelte-5gtlll"),c(De,"class","event-buttons svelte-5gtlll"),c(Be,"class","controls svelte-5gtlll"),c(ge,"class","section svelte-5gtlll"),c(Ve,"class","svelte-5gtlll"),oe.disabled=qe=e[1]!=="completed",c(oe,"class","btn btn-export svelte-5gtlll"),ie.disabled=Je=e[1]!=="completed",c(ie,"class","btn btn-export svelte-5gtlll"),c(_e,"class","controls svelte-5gtlll"),c(ve,"class","section svelte-5gtlll"),c(R,"class","control-panel svelte-5gtlll"),c(Y,"class","results-content svelte-5gtlll"),c(re,"class","results-panel svelte-5gtlll"),c(I,"class","main-content svelte-5gtlll"),c(He,"class","svelte-5gtlll"),c(Ee,"class","logs-content svelte-5gtlll"),c(he,"class","logs-panel svelte-5gtlll"),c(t,"class","workflow-container svelte-5gtlll")},m(f,A){H(f,t,A),n(t,l),n(l,s),n(s,o),n(s,p),n(s,i),n(i,u),n(i,a),n(i,d),We(d,e[0]),n(i,v),n(i,_),n(_,D),n(l,E),n(l,z),n(z,S),n(S,g),n(g,L),L.checked=e[12],n(g,V),n(t,K),n(t,I),n(I,R),n(R,$),n($,ue),n($,Ce),n($,q),n(q,W);for(let m=0;m<T.length;m+=1)T[m]&&T[m].m(W,null);It(W,e[7],!0),n(q,ze),n(q,Z),n(Z,Le),n(q,Qe),n(q,h),n(h,w),n(R,Q),n(R,de),n(de,Ne),n(de,ot),n(de,Te),n(Te,te),n(te,it),n(R,rt),n(R,pe),n(pe,Oe),n(pe,at),n(pe,x),n(x,le),n(le,ct),n(x,ut),n(x,se),n(se,ft),n(x,dt),n(x,ne),n(ne,pt),n(R,gt),n(R,ge),n(ge,Ue),n(ge,vt),n(ge,Be),n(Be,De);for(let m=0;m<4;m+=1)G[m]&&G[m].m(De,null);n(R,_t),n(R,ve),n(ve,Ve),n(ve,ht),n(ve,_e),n(_e,oe),n(oe,mt),n(_e,bt),n(_e,ie),n(ie,wt),n(I,yt),n(I,re),O&&O.m(re,null),n(re,Xe),n(re,Y),j&&j.m(Y,null),n(Y,Ze),M&&M.m(Y,null),n(Y,$e),P&&P.m(Y,null),n(t,kt),n(t,he),n(he,He),n(he,St),n(he,Ee);for(let m=0;m<F.length;m+=1)F[m]&&F[m].m(Ee,null);xe||(Dt=[J(d,"input",e[22]),J(L,"change",e[23]),J(W,"change",e[24]),J(Z,"click",e[13]),J(h,"click",e[14]),J(te,"click",e[15]),J(le,"click",e[16]),J(se,"click",e[17]),J(ne,"click",e[18]),J(oe,"click",e[20]),J(ie,"click",e[21])],xe=!0)},p(f,A){if(A[0]&1&&d.value!==f[0]&&We(d,f[0]),A[0]&2&&N(D,f[1]),A[0]&2&&b!==(b="status status-"+f[1]+" svelte-5gtlll")&&c(_,"class",b),A[0]&4096&&(L.checked=f[12]),A[0]&64){me=X(f[6]);let m;for(m=0;m<me.length;m+=1){const ee=Ft(f,me,m);T[m]?T[m].p(ee,A):(T[m]=Ot(ee),T[m].c(),T[m].m(W,null))}for(;m<T.length;m+=1)T[m].d(1);T.length=me.length}if(A[0]&192&&It(W,f[7]),A[0]&6&&fe!==(fe=f[2]||f[1]!=="idle")&&(Z.disabled=fe),A[0]&4&&C!==(C=!f[2])&&(h.disabled=C),A[0]&2&&Fe!==(Fe=f[1]!=="idle")&&(te.disabled=Fe),A[0]&3&&je!==(je=f[1]!=="idle"||!f[0])&&(le.disabled=je),A[0]&3&&Me!==(Me=f[1]!=="idle"||!f[0])&&(se.disabled=Me),A[0]&3&&Pe!==(Pe=f[1]!=="idle"||!f[0])&&(ne.disabled=Pe),A[0]&527362){et=X(["ato","sem","clu","mema"]);let m;for(m=0;m<4;m+=1){const ee=Tt(f,et,m);G[m]?G[m].p(ee,A):(G[m]=jt(ee),G[m].c(),G[m].m(De,null))}for(;m<4;m+=1)G[m].d(1)}if(A[0]&2&&qe!==(qe=f[1]!=="completed")&&(oe.disabled=qe),A[0]&2&&Je!==(Je=f[1]!=="completed")&&(ie.disabled=Je),f[3]?O?O.p(f,A):(O=Mt(f),O.c(),O.m(re,Xe)):O&&(O.d(1),O=null),f[8]?j?j.p(f,A):(j=Pt(f),j.c(),j.m(Y,Ze)):j&&(j.d(1),j=null),f[9]?M?M.p(f,A):(M=Ut(f),M.c(),M.m(Y,$e)):M&&(M.d(1),M=null),f[1]==="completed"&&f[10][f[11]]?.length?P?P.p(f,A):(P=Vt(f),P.c(),P.m(Y,null)):P&&(P.d(1),P=null),A[0]&32){be=X(f[5]);let m;for(m=0;m<be.length;m+=1){const ee=zt(f,be,m);F[m]?F[m].p(ee,A):(F[m]=Jt(ee),F[m].c(),F[m].m(Ee,null))}for(;m<F.length;m+=1)F[m].d(1);F.length=be.length}},i:ce,o:ce,d(f){f&&U(t),Re(T,f),Re(G,f),O&&O.d(),j&&j.d(),M&&M.d(),P&&P.d(),Re(F,f),xe=!1,Se(Dt)}}}function Ht(){return`session-${Date.now()}`}function Ll(e,t,l){let s="",o="idle",p=!1,i="",u=0,a=[],d=[],v="",_=null,D=null,b={ato:[],sem:[],clu:[],mema:[]},E="ato",z=!1,S=[];Gt(async()=>{await L(),await V(),g("TransRapport Desktop UI initialized"),g("Constitutional Framework: LD-3.4"),g("Mode: Offline only")});function g(h){const w=new Date().toLocaleTimeString();l(5,a=[`[${w}] ${h}`,...a].slice(0,50))}async function L(){try{const h=await Cl();h.success&&h.data&&(l(6,d=h.data),l(7,v=d.find(w=>w.is_default)?.id||d[0]?.id||""),g(`Loaded ${d.length} audio devices`))}catch(h){g(`Failed to load audio devices: ${h}`)}}async function V(){S=[{id:"demo-session",name:"Demo Session",status:"idle",created:new Date().toISOString(),files:{}}]}async function K(){s||l(0,s=Ht());try{l(3,i="Starting recording...");const h=await hl(s,v);h.success?(l(2,p=!0),l(1,o="recording"),g(`Recording started for session: ${s}`),g(h.stdout||"Recording active")):g(`Recording failed: ${h.error}`)}catch(h){g(`Recording error: ${h}`)}finally{l(3,i="")}}async function I(){if(!(!p||!s))try{l(3,i="Stopping recording...");const h=`./sessions/${s}/raw.wav`,w=await ml(s,h);if(w.success){l(2,p=!1),l(1,o="idle"),g(`Recording stopped for session: ${s}`),g(w.stdout||"Recording saved");const C=S.find(Q=>Q.id===s);C&&(C.files.raw_audio=h,S=[...S])}else g(`Stop recording failed: ${w.error}`)}catch(h){g(`Stop recording error: ${h}`)}finally{l(3,i="")}}async function R(){s||l(0,s=Ht());const h="../samples/test.txt";try{l(3,i="Importing file...");const w=await bl(s,h,"Imported file");w.success?(g(`File imported for session: ${s}`),g(w.stdout||"Import completed")):g(`Import failed: ${w.error}`)}catch(w){g(`Import error: ${w}`)}finally{l(3,i="")}}async function $(){if(!s){g("No active session for transcription");return}try{l(1,o="transcribing"),l(3,i="Transcribing audio..."),l(4,u=0);const h=setInterval(()=>{l(4,u=Math.min(u+10,90))},200),w=await wl(s,"base","de");if(clearInterval(h),l(4,u=100),w.success){l(8,_=w.data),l(1,o="idle"),g(`Transcription completed for session: ${s}`),g(`Language: ${w.data?.language}, Duration: ${w.data?.duration}s`);const C=S.find(Q=>Q.id===s);C&&(C.files.transcript=`./sessions/${s}/transcript.json`,C.duration=w.data?.duration,S=[...S])}else g(`Transcription failed: ${w.error}`),l(1,o="idle")}catch(h){g(`Transcription error: ${h}`),l(1,o="idle")}finally{l(3,i=""),l(4,u=0)}}async function ue(){if(!s){g("No active session for diarization");return}try{l(1,o="diarizing"),l(3,i="Performing speaker diarization..."),l(4,u=0);const h=setInterval(()=>{l(4,u=Math.min(u+8,85))},300),w=await yl(s,1.5);if(clearInterval(h),l(4,u=100),w.success){l(9,D=w.data),l(1,o="idle"),g(`Diarization completed for session: ${s}`),g(`Speakers detected: ${w.data?.speakers?.length}`);const C=S.find(Q=>Q.id===s);C&&(C.files.diarization=`./sessions/${s}/diarization.json`,S=[...S])}else g(`Diarization failed: ${w.error}`),l(1,o="idle")}catch(h){g(`Diarization error: ${h}`),l(1,o="idle")}finally{l(3,i=""),l(4,u=0)}}async function Ce(){if(!s){g("No active session for analysis");return}try{l(1,o="analyzing"),l(3,i="Running LD-3.4 constitutional analysis..."),l(4,u=0);const h=setInterval(()=>{l(4,u=Math.min(u+5,80))},400),w=await kl(s);if(clearInterval(h),l(4,u=100),w.success){l(1,o="completed"),g(`LD-3.4 analysis completed for session: ${s}`),g("Constitutional markers detected and analyzed"),await q();const C=S.find(Q=>Q.id===s);C&&(C.status="completed",C.files.analysis=`./sessions/${s}/analysis.json`,S=[...S])}else g(`Analysis failed: ${w.error}`),l(1,o="idle")}catch(h){g(`Analysis error: ${h}`),l(1,o="idle")}finally{l(3,i=""),l(4,u=0)}}async function q(){if(s)try{for(const h of["ato","sem","clu","mema"]){let w;switch(h){case"ato":w=await Sl(s,200);break;case"sem":w=await Dl(s,200);break;case"clu":w=await El(s,200);break;case"mema":w=await Rl(s,200);break;default:throw new Error(`Unknown event level: ${h}`)}if(w.success&&w.data){const C=Array.isArray(w.data)?w.data:w.data.events||[];l(10,b[h]=C,b)}}}catch(h){g(`Failed to load analysis events: ${h}`)}}async function W(){if(!s){g("No active session for export");return}try{l(3,i="Exporting report...");const h=await Il(s,"pdf");h.success?(g(`Report exported for session: ${s}`),g(h.stdout||"Export completed")):g(`Export failed: ${h.error}`)}catch(h){g(`Export error: ${h}`)}finally{l(3,i="")}}async function ze(){if(!s){g("No active session for data export");return}try{l(3,i="Exporting data...");const h=await Al(s);h.success?(g(`Data exported for session: ${s}`),g(h.stdout||"Data export completed")):g(`Data export failed: ${h.error}`)}catch(h){g(`Data export error: ${h}`)}finally{l(3,i="")}}function Z(){s=this.value,l(0,s)}function Le(){z=this.checked,l(12,z)}function fe(){v=ol(this),l(7,v),l(6,d)}return[s,o,p,i,u,a,d,v,_,D,b,E,z,K,I,R,$,ue,Ce,q,W,ze,Z,Le,fe,h=>{l(11,E=h),q()}]}class Nl extends xt{constructor(t){super(),$t(this,t,Ll,zl,Yt,{},null,[-1,-1])}}function Tl(e){let t;return{c(){t=r("div"),t.innerHTML='<h1 class="svelte-dnblz6">TransRapport</h1> <p class="svelte-dnblz6">Loading offline transcription system...</p>',c(t,"class","loading svelte-dnblz6")},m(l,s){H(l,t,s)},i:ce,o:ce,d(l){l&&U(t)}}}function Fl(e){let t,l;return t=new Nl({}),{c(){pl(t.$$.fragment)},m(s,o){Xt(t,s,o),l=!0},i(s){l||(Ge(t.$$.fragment,s),l=!0)},o(s){nt(t.$$.fragment,s),l=!1},d(s){Zt(t,s)}}}function Ol(e){let t,l,s,o;const p=[Fl,Tl],i=[];function u(a,d){return a[0]?0:1}return l=u(e),s=i[l]=p[l](e),{c(){t=r("main"),s.c(),c(t,"class","app svelte-dnblz6")},m(a,d){H(a,t,d),i[l].m(t,null),o=!0},p(a,[d]){let v=l;l=u(a),l!==v&&(fl(),nt(i[v],1,1,()=>{i[v]=null}),dl(),s=i[l],s||(s=i[l]=p[l](a),s.c()),Ge(s,1),s.m(t,null))},i(a){o||(Ge(s),o=!0)},o(a){nt(s),o=!1},d(a){a&&U(t),i[l].d()}}}function jl(e,t,l){let s=!1;return Gt(async()=>{console.log("TransRapport Desktop Application starting..."),l(0,s=!0)}),[s]}class Ml extends xt{constructor(t){super(),$t(this,t,jl,Ol,Yt,{})}}new Ml({target:document.getElementById("app")});
